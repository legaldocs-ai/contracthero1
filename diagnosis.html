<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>Aurum 申诉办公桌 — 免费风险诊断</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <meta name="description" content="在花钱写申诉信之前，先做一次冷静的书面风险评估。Aurum 会生成一份书面风险诊断报告，并提供约 30% 的英文申诉信预览。" />

  <link rel="icon" href="favicon.png" type="image/png" />

  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg: #eef3ff;
      --bg-soft: rgba(255, 255, 255, 0.92);
      --ink: #0f172a;
      --ink-soft: #64748b;
      --line-soft: rgba(148, 163, 184, 0.55);
      --accent: #2563eb;
      --accent-soft: rgba(37, 99, 235, 0.12);
      --accent-strong: #1d4ed8;
      --danger: #b91c1c;
      --radius-lg: 26px;
      --radius-md: 18px;
      --radius-pill: 999px;
      --shadow-soft: 0 26px 70px rgba(15, 23, 42, 0.21);
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #dbeafe 0, #eef2ff 35%, #e5e7eb 100%);
      color: var(--ink);
      min-height: 100vh;
    }

    a { color: inherit; text-decoration: none; }

    .page {
      max-width: 1120px;
      margin: 16px auto 40px;
      padding: 16px 16px 40px;
    }

    /* 顶部导航 */
    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      padding: 8px 14px 16px;
      margin-bottom: 6px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.04);
      backdrop-filter: blur(18px);
      border: 1px solid rgba(148, 163, 184, 0.35);
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.08);
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .brand-avatar {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      background: conic-gradient(from 210deg, #f97316, #facc15, #22c55e, #3b82f6, #6366f1, #f97316);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-weight: 700;
      font-size: 16px;
      box-shadow: 0 0 0 3px rgba(15, 23, 42, 0.85);
    }

    .brand-text-main {
      font-weight: 650;
      font-size: 15px;
      letter-spacing: 0.04em;
    }

    .brand-text-sub {
      font-size: 11px;
      color: var(--ink-soft);
    }

    .nav-links {
      display: flex;
      align-items: center;
      gap: 14px;
      font-size: 13px;
      color: var(--ink-soft);
    }

    .nav-links a[data-current="true"] {
      color: var(--ink);
      font-weight: 600;
    }

    .nav-actions {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .badge-toggle {
      position: relative;
      display: inline-flex;
      padding: 3px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.08);
    }

    .badge-toggle span {
      position: relative;
      z-index: 2;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 11px;
      cursor: default;
    }

    .badge-toggle span.active {
      background: #fff;
      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.25);
      color: var(--accent-strong);
      font-weight: 600;
    }

    .btn-ghost {
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      font-size: 12px;
      color: var(--ink-soft);
      background: rgba(15, 23, 42, 0.02);
      cursor: pointer;
    }

    .btn-primary {
      padding: 7px 16px;
      border-radius: 999px;
      border: none;
      background: radial-gradient(circle at top, #60a5fa 0, #2563eb 28%, #1e40af 100%);
      color: #fff;
      font-size: 12px;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 7px;
      cursor: pointer;
      box-shadow: 0 18px 40px rgba(37, 99, 235, 0.5);
    }

    .btn-primary .dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.4);
    }

    /* 主体布局 */
    .main-grid {
      margin-top: 14px;
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.1fr);
      gap: 18px;
      align-items: flex-start;
    }

    .hero-left {
      padding: 18px 20px 20px;
      border-radius: var(--radius-lg);
      background: rgba(255, 255, 255, 0.9);
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(148, 163, 184, 0.4);
      backdrop-filter: blur(18px);
    }

    .steps-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 12px;
      font-size: 11px;
    }

    .step-pill {
      border-radius: 999px;
      padding: 4px 10px;
      background: rgba(15, 23, 42, 0.03);
      color: var(--ink-soft);
      border: 1px solid rgba(148, 163, 184, 0.6);
    }

    .step-pill.highlight {
      border-color: rgba(34, 197, 94, 0.8);
      color: #16a34a;
    }

    .hero-title {
      font-size: 24px;
      line-height: 1.3;
      font-weight: 750;
      margin-bottom: 8px;
      color: #0f172a;
    }

    .hero-desc {
      font-size: 13px;
      color: var(--ink-soft);
      line-height: 1.7;
      margin-bottom: 12px;
    }

    .hero-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 7px;
      margin-bottom: 18px;
    }

    .hero-tags span {
      font-size: 11px;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.03);
      border: 1px dashed rgba(148, 163, 184, 0.6);
      color: var(--ink-soft);
    }

    .form-section-title {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 6px;
    }

    .form-hint {
      font-size: 11px;
      color: var(--ink-soft);
      margin-bottom: 10px;
    }

    .fieldset {
      border-radius: var(--radius-md);
      background: rgba(248, 250, 252, 0.95);
      border: 1px solid rgba(148, 163, 184, 0.45);
      padding: 12px 12px 6px;
      box-shadow: 0 20px 40px rgba(15, 23, 42, 0.06);
    }

    .field-row {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.1fr);
      gap: 10px;
      margin-bottom: 10px;
    }

    .field {
      margin-bottom: 10px;
    }

    label {
      display: block;
      font-size: 11px;
      color: var(--ink-soft);
      margin-bottom: 4px;
    }

    select,
    input[type="text"],
    input[type="email"],
    textarea {
      width: 100%;
      border-radius: 12px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      padding: 8px 10px;
      font-size: 13px;
      font-family: inherit;
      background: rgba(255, 255, 255, 0.9);
      outline: none;
      transition: border-color 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
    }

    select:focus,
    input:focus,
    textarea:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.5);
      background: #fff;
    }

    textarea {
      min-height: 52px;
      resize: vertical;
    }

    .disclaimer {
      margin-top: 10px;
      font-size: 11px;
      color: var(--ink-soft);
      line-height: 1.6;
    }

    .run-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-top: 12px;
    }

    .run-row-note {
      font-size: 11px;
      color: var(--ink-soft);
    }

    /* 右侧结果区 */
    .right-column {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .card {
      border-radius: var(--radius-lg);
      background: var(--bg-soft);
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(148, 163, 184, 0.5);
      padding: 14px 18px 16px;
      backdrop-filter: blur(16px);
      position: relative;
      overflow: hidden;
    }

    .card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      margin-bottom: 8px;
    }

    .card-title {
      font-size: 14px;
      font-weight: 600;
    }

    .card-subtitle {
      font-size: 12px;
      color: var(--ink-soft);
    }

    .pill-soft {
      font-size: 11px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      color: var(--ink-soft);
      background: rgba(255, 255, 255, 0.7);
    }

    .pill-live {
      border-color: rgba(34, 197, 94, 0.7);
      color: #15803d;
    }

    .pill-preview-only {
      border-style: dashed;
    }

    .diagnosis-body {
      font-size: 13px;
      line-height: 1.7;
      color: var(--ink);
    }

    .skeleton-line {
      height: 10px;
      border-radius: 999px;
      background: linear-gradient(
        90deg,
        rgba(226, 232, 240, 0.35),
        rgba(148, 163, 184, 0.55),
        rgba(226, 232, 240, 0.35)
      );
      background-size: 200% 100%;
      animation: shimmer 1.2s infinite;
      margin-bottom: 8px;
    }

    .skeleton-line:nth-child(2) { width: 92%; }
    .skeleton-line:nth-child(3) { width: 86%; }
    .skeleton-line:nth-child(4) { width: 74%; }

    @keyframes shimmer {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }

    /* 30% 预览卡片 */
    .preview-card {
      position: relative;
      padding: 14px 16px 18px;
      border-radius: 22px;
      background: rgba(255, 255, 255, 0.96);
      box-shadow: 0 20px 50px rgba(15, 23, 42, 0.16);
      border: 1px solid rgba(148, 163, 184, 0.6);
      overflow: hidden;
      color: var(--ink-soft);
      font-size: 12px;
    }

    .preview-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    .preview-title {
      font-size: 14px;
      font-weight: 600;
      color: var(--ink);
    }

    .preview-note {
      font-size: 11px;
      color: var(--ink-soft);
    }

    .badge-soft {
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.55);
      font-size: 11px;
      color: var(--ink-soft);
      background: rgba(248, 250, 252, 0.95);
    }

    .preview-text {
      margin-top: 10px;
      font-size: 13px;
      line-height: 1.7;
      color: var(--ink);
      max-height: 7.6rem;  /* 桌面：约 3–4 行 */
      overflow: hidden;
    }

    .preview-blur {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      height: 52%;
      background: linear-gradient(
        to bottom,
        rgba(248, 250, 252, 0) 0%,
        rgba(248, 250, 252, 0.96) 70%,
        rgba(248, 250, 252, 1) 100%
      );
      pointer-events: none;
    }

    .preview-footer {
      position: relative;
      margin-top: 6px;
      font-size: 11px;
      color: var(--ink-soft);
    }

    /* 付款步骤卡片 */
    .step-card-title {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .step-card-sub {
      font-size: 11px;
      color: var(--ink-soft);
      margin-bottom: 8px;
    }

    .plan-pill-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
    }

    .plan-chip {
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 11px;
      background: rgba(248, 250, 252, 0.85);
      border: 1px solid rgba(148, 163, 184, 0.6);
      color: var(--ink-soft);
    }

    .plan-chip strong {
      color: var(--ink);
    }

    .plan-price {
      font-size: 12px;
      text-align: right;
      color: var(--ink-soft);
    }

    .plan-price strong {
      font-size: 16px;
      color: var(--ink);
    }

    .plan-price small {
      font-size: 11px;
      color: var(--ink-soft);
    }

    .pay-links-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 8px;
    }

    .pay-link {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 7px 14px;
      border-radius: 999px;
      font-size: 12px;
      border: 1px dashed rgba(148, 163, 184, 0.9);
      color: #1d4ed8;
      background: rgba(239, 246, 255, 0.95);
      cursor: pointer;
      text-decoration: none;
    }

    .pay-link.secondary {
      color: #0369a1;
      border-style: dashed;
      background: rgba(224, 242, 254, 0.9);
    }

    .pay-checkbox {
      display: flex;
      align-items: flex-start;
      gap: 8px;
      font-size: 11px;
      color: var(--ink-soft);
      margin-bottom: 8px;
    }

    .pay-checkbox input {
      margin-top: 2px;
    }

    .btn-unlock {
      margin-top: 4px;
      padding: 8px 15px;
      border-radius: 999px;
      border: none;
      background: linear-gradient(135deg, #4f46e5, #2563eb);
      color: #fff;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 18px 36px rgba(37, 99, 235, 0.55);
    }

    .btn-unlock:disabled {
      opacity: 0.45;
      cursor: default;
      box-shadow: none;
    }

    .unlock-note {
      margin-top: 6px;
      font-size: 11px;
      color: var(--ink-soft);
    }

    /* 深蓝色完整申诉信 */
    .full-letter-card {
      border-radius: var(--radius-lg);
      background: radial-gradient(circle at top left, #1e293b 0, #020617 60%);
      padding: 16px 18px 18px;
      color: #e5e7eb;
      box-shadow: 0 30px 70px rgba(15, 23, 42, 0.7);
      border: 1px solid rgba(15, 23, 42, 0.75);
      position: relative;
      overflow: hidden;
    }

    .full-letter-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      gap: 8px;
    }

    .full-letter-title {
      font-size: 13px;
      font-weight: 600;
    }

    .full-letter-tag {
      font-size: 11px;
      padding: 3px 9px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.8);
      color: #cbd5f5;
    }

    .full-letter-body {
      font-size: 13px;
      line-height: 1.8;
      white-space: pre-wrap;
      max-height: 340px;
      overflow: auto;
    }

    .full-letter-body::-webkit-scrollbar {
      width: 6px;
    }
    .full-letter-body::-webkit-scrollbar-thumb {
      background: rgba(148, 163, 184, 0.8);
      border-radius: 999px;
    }

    .full-letter-footer {
      margin-top: 6px;
      font-size: 11px;
      color: rgba(148, 163, 184, 0.95);
    }

    /* 响应式 */
    @media (max-width: 960px) {
      .page {
        margin-top: 10px;
        padding: 10px 10px 32px;
      }
      .main-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    @media (max-width: 640px) {
      header {
        flex-wrap: wrap;
        border-radius: 20px;
      }

      .nav-links { display: none; }

      .hero-title {
        font-size: 20px;
      }

      .hero-left {
        padding: 14px 14px 16px;
      }

      .fieldset {
        padding: 10px 10px 6px;
      }

      .field-row {
        grid-template-columns: minmax(0, 1fr);
      }

      .preview-text {
        max-height: 11rem;  /* 手机上多显示内容 */
      }

      .preview-blur {
        height: 34%;        /* 手机上模糊减少 */
      }

      .full-letter-body {
        max-height: 260px;
      }
    }
  </style>
</head>

<body>
  <div class="page">
    <!-- 顶部导航 -->
    <header>
      <div class="brand">
        <div class="brand-avatar">A</div>
        <div>
          <div class="brand-text-main">AURUM 办公桌</div>
          <div class="brand-text-sub">账户申诉 | 账号恢复书信</div>
        </div>
      </div>

      <nav class="nav-links">
        <a href="index.html">首页</a>
        <a href="index.html#how-it-works">工作原理</a>
        <a href="pricing.html">价格</a>
        <a href="diagnosis.html" data-current="true">免费诊断</a>
      </nav>

      <div class="nav-actions">
        <button class="btn-ghost">客户端登录</button>
        <div class="badge-toggle">
          <span>访客</span>
          <span class="active">本页</span>
        </div>
      </div>
    </header>

    <!-- 主体 -->
    <div class="main-grid">
      <!-- 左侧：表单 -->
      <section class="hero-left">
        <div class="steps-row">
          <span class="step-pill">① 免费诊断</span>
          <span class="step-pill highlight">② 按需购买完整申诉信（189 美元起）</span>
        </div>

        <h1 class="hero-title">在花钱写申诉信之前，先冷静地进行书面风险评估。</h1>
        <p class="hero-desc">
          粘贴您的申诉通知和描述您的实际活动，Aurum 会生成一份书面风险诊断报告，并提供约 30% 的申诉信预览——用平台风险团队看得懂的语言，帮您把情况讲清楚。
        </p>

        <div class="hero-tags">
          <span>专为 Meta Ads、PayPal、Airbnb、亚马逊等平台设计</span>
          <span>更适合欧美平台风控的专业人士</span>
          <span>大多数案例无需开通订阅</span>
        </div>

        <div class="form-section-title">案件详情</div>
        <div class="form-hint">
          请用真实的业务语言描述。不需要“编故事”，但要尽量具体。我们不会把这些内容发给平台。
        </div>

        <form id="diagnosisForm">
          <div class="fieldset">
            <div class="field-row">
              <div class="field">
                <label for="platform">平台</label>
                <select id="platform" name="platform">
                  <option value="Meta Ads / Facebook Business" selected>Meta Ads / Facebook Business</option>
                  <option value="PayPal">PayPal</option>
                  <option value="Stripe">Stripe</option>
                  <option value="Airbnb">Airbnb</option>
                  <option value="Amazon">Amazon</option>
                  <option value="Other">其它平台</option>
                </select>
              </div>
              <div class="field">
                <label for="region">国家 / 地区</label>
                <input id="region" name="region" type="text" placeholder="US, DE, UK..." />
              </div>
            </div>

            <div class="field">
              <label for="accountUse">这个账户是用来做什么的？</label>
              <textarea id="accountUse" name="accountUse" placeholder="比如：电商广告投放、小企业收款、短租民宿、跨境电商店铺等。"></textarea>
            </div>

            <div class="field">
              <label for="noticeText">官方暂停 / 限制通知</label>
              <textarea id="noticeText" name="noticeText" placeholder="直接粘贴邮件正文或站内通知，尽量保持原文。"></textarea>
            </div>

            <div class="field">
              <label for="whatHappened">实际发生了什么？</label>
              <textarea id="whatHappened" name="whatHappened" placeholder="诚实描述：之前是否有灰色操作、被警告过、账号有几个人使用等。"></textarea>
            </div>

            <div class="field">
              <label for="whatYouDid">你已经做过什么尝试？</label>
              <textarea id="whatYouDid" name="whatYouDid" placeholder="例如：上诉过几次、改过哪些设置、是否联系过客服等。"></textarea>
            </div>

            <div class="field">
              <label for="email">电子邮件（可选，用于发送副本）</label>
              <input id="email" name="email" type="email" placeholder="you@example.com" />
            </div>
          </div>

          <div class="disclaimer">
            这不是法律意见，最终决定权在各个平台。我们的目标是帮您减少低级错误，把情况讲得更清楚、更专业。
          </div>

          <div class="run-row">
            <button type="submit" class="btn-primary" id="runBtn">
              <span class="dot" id="runDot"></span>
              Run risk diagnosis
            </button>
            <div class="run-row-note">
              本步骤只生成诊断和预览，不会触发任何付款。
            </div>
          </div>
        </form>
      </section>

      <!-- 右侧：诊断结果 & 预览 & 付款步骤 -->
      <section class="right-column">
        <!-- 风险诊断 -->
        <div class="card">
          <div class="card-header">
            <div>
              <div class="card-title">Risk diagnosis</div>
              <div class="card-subtitle">How your case looks from the platform’s internal risk perspective.</div>
            </div>
            <span class="pill-soft pill-live">LIVE PREVIEW</span>
          </div>

          <div id="diagSkeleton">
            <div class="skeleton-line"></div>
            <div class="skeleton-line"></div>
            <div class="skeleton-line"></div>
            <div class="skeleton-line"></div>
          </div>

          <div class="diagnosis-body" id="diagBody" style="display:none;">
            在这里，系统会用平台风控团队熟悉的语言，给出一份简短的风险诊断：包括这次限制更像“硬性封禁”、政策误伤，还是文档不足 / 账户结构问题等。
          </div>
        </div>

        <!-- 申诉信 30% 预览 -->
        <div class="preview-card">
          <div class="preview-header">
            <div>
              <div class="preview-title">Appeal letter preview (~30%)</div>
              <div class="preview-note">Written in calm, structured language for risk &amp; compliance teams.</div>
            </div>
            <span class="badge-soft">PREVIEW ONLY</span>
          </div>

          <div class="preview-text" id="previewText">
Dear Risk &amp; Compliance Team,

This panel shows an example of how your appeal letter will start. In the actual service we
draft this text from your real description and the platform’s notice, using calm and
professional language that a risk or compliance analyst can read quickly.

For now this is sample preview text so you can see the structure and tone that your clients
will receive before paying.
          </div>

          <div class="preview-blur"></div>
          <div class="preview-footer">
            The remaining 70%+ and export options unlock after payment in Step 2.
          </div>
        </div>

        <!-- Step 2 付款解锁 -->
        <div class="card">
          <div class="card-header">
            <div>
              <div class="step-card-title">Step 2 — Pay & unlock full appeal letter</div>
              <div class="step-card-sub">
                先看完风险诊断和预览，再决定是否需要完整申诉信。没有强制订阅。
              </div>
            </div>
            <div class="pill-soft" id="planBadge">
              建议方案：<strong>Standard appeal letter — $89</strong>
            </div>
          </div>

          <div class="plan-pill-row">
            <div class="plan-chip" id="planChipText">
              Most clients only need one case — no subscription.
            </div>
            <div class="plan-price" id="planPriceBox">
              <div><strong>$89</strong> <small>per case</small></div>
              <div style="font-size:11px;color:var(--ink-soft);" id="planMini">
                Standard appeal letter
              </div>
            </div>
          </div>

          <div class="step-card-sub">
            1. Pay using the link below.  
            您可以将自己的 Wise / Paddle / 其它收款链接替换到下面按钮。
          </div>

          <div class="pay-links-row">
            <a href="#" class="pay-link" id="mainPayLink">Main payment link (replace with your real URL)</a>
            <a href="#" class="pay-link secondary" id="backupPayLink">Backup link (optional)</a>
          </div>

          <label class="pay-checkbox">
            <input type="checkbox" id="paidCheck" />
            <span>I confirm I’ve completed the payment for this case and want to unlock the full appeal letter on this page.</span>
          </label>

          <button class="btn-unlock" id="unlockBtn" disabled>
            Generate full appeal letter
          </button>

          <div class="unlock-note">
            After payment is confirmed, the full English appeal letter for this case will appear in the dark panel below.  
            您的客户可以复制到平台表单，或导出到文档中。
          </div>
        </div>

        <!-- 完整申诉信 -->
        <div class="full-letter-card">
          <div class="full-letter-header">
            <div class="full-letter-title">完整申诉信（付款后解锁）</div>
            <span class="full-letter-tag">Final letter for platform review</span>
          </div>
          <div class="full-letter-body" id="fullLetterBody">
Dear Risk &amp; Compliance Team,

This panel will hold the complete appeal letter for your client’s case. In the actual
service we prepare a structured 1–2 page explanation that matches the platform’s policies
and the written risk diagnosis, so that your team can review the situation in a calm and
transparent way.

Right now this is sample text so you can see the layout and how a finished letter would look
on the page. When the service is live, your client will be able to copy this letter into the
platform’s appeal form or export it to a document.

Best regards,
Aurum Account Recovery Desk
          </div>
          <div class="full-letter-footer">
            提示：我们不会登录客户账户，所有文本都以“书面说明 / 申诉信”的方式提供，方便转交会计、律师或商务伙伴。
          </div>
        </div>
      </section>
    </div>
  </div>

  <!-- 逻辑脚本 -->
  <script>
    const form = document.getElementById("diagnosisForm");
    const runBtn = document.getElementById("runBtn");
    const runDot = document.getElementById("runDot");
    const diagSkeleton = document.getElementById("diagSkeleton");
    const diagBody = document.getElementById("diagBody");
    const previewText = document.getElementById("previewText");
    const fullLetterBody = document.getElementById("fullLetterBody");

    const planBadge = document.getElementById("planBadge");
    const planChipText = document.getElementById("planChipText");
    const planPriceBox = document.getElementById("planPriceBox");
    const planMini = document.getElementById("planMini");
    const mainPayLink = document.getElementById("mainPayLink");
    const backupPayLink = document.getElementById("backupPayLink");

    const paidCheck = document.getElementById("paidCheck");
    const unlockBtn = document.getElementById("unlockBtn");

    let lastPayload = null;

    const DEFAULT_RISK_TEXT =
      "在这里，系统会用平台风控团队熟悉的语言，给出一份简短的风险诊断：包括这次限制更像“硬性封禁”、政策误伤，还是文档不足 / 账户结构问题等。";

    const DEFAULT_PREVIEW_TEXT = previewText.textContent.trim();

    function setRunning(running) {
      if (running) {
        runBtn.disabled = true;
        runBtn.textContent = "Running diagnosis…";
        runDot.style.animation = "pulse 1s infinite";
        diagSkeleton.style.display = "block";
        diagBody.style.display = "none";
      } else {
        runBtn.disabled = false;
        runBtn.textContent = "Run risk diagnosis";
        runDot.style.animation = "none";
      }
    }

    // 推荐方案显示
    function applyPlan(planKey) {
      let title = "Standard appeal letter — $89";
      let chip = "Most clients only need one case — no subscription.";
      let priceHtml =
        '<div><strong>$89</strong> <small>per case</small></div>' +
        '<div style="font-size:11px;color:var(--ink-soft);">Standard appeal letter</div>';

      if (planKey === "recovery") {
        title = "Recovery pack — $189";
        chip = "For complex cases: multiple flags, payment risk or multi-platform cases.";
        priceHtml =
          '<div><strong>$189</strong> <small>per case</small></div>' +
          '<div style="font-size:11px;color:var(--ink-soft);">Recovery pack for complex cases</div>';
      } else if (planKey === "desk") {
        title = "Ongoing desk — $380 / month";
        chip = "For agencies or operators who manage many accounts and need standing support.";
        priceHtml =
          '<div><strong>$380</strong> <small>per month</small></div>' +
          '<div style="font-size:11px;color:var(--ink-soft);">Ongoing desk for agencies / operators</div>';
      }

      planBadge.innerHTML = "建议方案：<strong>" + title + "</strong>";
      planChipText.textContent = chip;
      planPriceBox.innerHTML = priceHtml;
    }

    // 绑定默认 plan（如果有的话，可以从 URL 参数解析，这里简单默认 standard）
    applyPlan("standard");

    // ===== Step1: 调用 Workers 诊断 API =====
    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const payload = {
        platform: document.getElementById("platform").value,
        region: document.getElementById("region").value,
        accountUse: document.getElementById("accountUse").value,
        noticeText: document.getElementById("noticeText").value,
        whatHappened: document.getElementById("whatHappened").value,
        whatYouDid: document.getElementById("whatYouDid").value,
        email: document.getElementById("email").value,
        initialPlan: "standard",
      };

      lastPayload = payload;
      setRunning(true);

      try {
        const res = await fetch("https://aurum-task-worker.sophieinbg.workers.dev/api/diagnosis", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload),
        });

        const data = await res.json();

        diagSkeleton.style.display = "none";
        diagBody.style.display = "block";

        if (!data.ok) {
          diagBody.textContent =
            "There was a temporary system error while generating the written diagnosis. Please try again later.";
          previewText.textContent = DEFAULT_PREVIEW_TEXT;
          applyPlan("standard");
          return;
        }

        diagBody.textContent = data.risk || DEFAULT_RISK_TEXT;
        previewText.textContent = data.preview || DEFAULT_PREVIEW_TEXT;
        applyPlan(data.suggestedPlan || "standard");
      } catch (err) {
        diagSkeleton.style.display = "none";
        diagBody.style.display = "block";
        diagBody.textContent =
          "There was a temporary system error while generating the written diagnosis. Please try again in a moment.";
        previewText.textContent = DEFAULT_PREVIEW_TEXT;
        applyPlan("standard");
      } finally {
        setRunning(false);
      }
    });

    // 勾选付款复选框后，按钮可用
    paidCheck.addEventListener("change", () => {
      unlockBtn.disabled = !paidCheck.checked;
    });

    // ===== Step2: 生成完整申诉信 =====
    unlockBtn.addEventListener("click", async () => {
      if (!paidCheck.checked || !lastPayload || unlockBtn.disabled) return;

      unlockBtn.disabled = true;
      unlockBtn.textContent = "Generating full appeal…";

      try {
        const res = await fetch("https://aurum-task-worker.sophieinbg.workers.dev/api/full-letter", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            ...lastPayload,
            planFromPricing: "client-selected",
            riskSummary: diagBody.textContent || "",
          }),
        });

        const data = await res.json();

        if (!data.ok || !data.fullLetter) {
          fullLetterBody.textContent =
            "We could not generate a full letter at this moment. Please try again or contact support with your case details.";
        } else {
          fullLetterBody.textContent = data.fullLetter;
        }
      } catch (err) {
        fullLetterBody.textContent =
          "Network or system error while generating full letter. Please try again later.";
      } finally {
        unlockBtn.textContent = "Generate full appeal letter";
        unlockBtn.disabled = !paidCheck.checked;
      }
    });
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>Aurum 申诉办公桌 — 免费风险诊断</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <meta name="description" content="在花钱写申诉信之前，先做一次冷静的书面风险评估。Aurum 会生成一份书面风险诊断报告，并提供约 30% 的英文申诉信预览。" />

  <link rel="icon" href="favicon.png" type="image/png" />

  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg: #eef3ff;
      --bg-soft: rgba(255, 255, 255, 0.92);
      --ink: #0f172a;
      --ink-soft: #64748b;
      --line-soft: rgba(148, 163, 184, 0.55);
      --accent: #2563eb;
      --accent-soft: rgba(37, 99, 235, 0.12);
      --accent-strong: #1d4ed8;
      --danger: #b91c1c;
      --radius-lg: 26px;
      --radius-md: 18px;
      --radius-pill: 999px;
      --shadow-soft: 0 26px 70px rgba(15, 23, 42, 0.21);
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #dbeafe 0, #eef2ff 35%, #e5e7eb 100%);
      color: var(--ink);
      min-height: 100vh;
    }

    a { color: inherit; text-decoration: none; }

    .page {
      max-width: 1120px;
      margin: 16px auto 40px;
      padding: 16px 16px 40px;
    }

    /* 顶部导航 */
    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      padding: 8px 14px 16px;
      margin-bottom: 6px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.04);
      backdrop-filter: blur(18px);
      border: 1px solid rgba(148, 163, 184, 0.35);
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.08);
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .brand-avatar {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      background: conic-gradient(from 210deg, #f97316, #facc15, #22c55e, #3b82f6, #6366f1, #f97316);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-weight: 700;
      font-size: 16px;
      box-shadow: 0 0 0 3px rgba(15, 23, 42, 0.85);
    }

    .brand-text-main {
      font-weight: 650;
      font-size: 15px;
      letter-spacing: 0.04em;
    }

    .brand-text-sub {
      font-size: 11px;
      color: var(--ink-soft);
    }

    .nav-links {
      display: flex;
      align-items: center;
      gap: 14px;
      font-size: 13px;
      color: var(--ink-soft);
    }

    .nav-links a[data-current="true"] {
      color: var(--ink);
      font-weight: 600;
    }

    .nav-actions {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .badge-toggle {
      position: relative;
      display: inline-flex;
      padding: 3px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.08);
    }

    .badge-toggle span {
      position: relative;
      z-index: 2;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 11px;
      cursor: default;
    }

    .badge-toggle span.active {
      background: #fff;
      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.25);
      color: var(--accent-strong);
      font-weight: 600;
    }

    .btn-ghost {
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      font-size: 12px;
      color: var(--ink-soft);
      background: rgba(15, 23, 42, 0.02);
      cursor: pointer;
    }

    .btn-primary {
      padding: 7px 16px;
      border-radius: 999px;
      border: none;
      background: radial-gradient(circle at top, #60a5fa 0, #2563eb 28%, #1e40af 100%);
      color: #fff;
      font-size: 12px;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 7px;
      cursor: pointer;
      box-shadow: 0 18px 40px rgba(37, 99, 235, 0.5);
    }

    .btn-primary .dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.4);
    }

    /* 主体布局 */
    .main-grid {
      margin-top: 14px;
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.1fr);
      gap: 18px;
      align-items: flex-start;
    }

    .hero-left {
      padding: 18px 20px 20px;
      border-radius: var(--radius-lg);
      background: rgba(255, 255, 255, 0.9);
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(148, 163, 184, 0.4);
      backdrop-filter: blur(18px);
    }

    .steps-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 12px;
      font-size: 11px;
    }

    .step-pill {
      border-radius: 999px;
      padding: 4px 10px;
      background: rgba(15, 23, 42, 0.03);
      color: var(--ink-soft);
      border: 1px solid rgba(148, 163, 184, 0.6);
    }

    .step-pill.highlight {
      border-color: rgba(34, 197, 94, 0.8);
      color: #16a34a;
    }

    .hero-title {
      font-size: 24px;
      line-height: 1.3;
      font-weight: 750;
      margin-bottom: 8px;
      color: #0f172a;
    }

    .hero-desc {
      font-size: 13px;
      color: var(--ink-soft);
      line-height: 1.7;
      margin-bottom: 12px;
    }

    .hero-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 7px;
      margin-bottom: 18px;
    }

    .hero-tags span {
      font-size: 11px;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.03);
      border: 1px dashed rgba(148, 163, 184, 0.6);
      color: var(--ink-soft);
    }

    .form-section-title {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 6px;
    }

    .form-hint {
      font-size: 11px;
      color: var(--ink-soft);
      margin-bottom: 10px;
    }

    .fieldset {
      border-radius: var(--radius-md);
      background: rgba(248, 250, 252, 0.95);
      border: 1px solid rgba(148, 163, 184, 0.45);
      padding: 12px 12px 6px;
      box-shadow: 0 20px 40px rgba(15, 23, 42, 0.06);
    }

    .field-row {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.1fr);
      gap: 10px;
      margin-bottom: 10px;
    }

    .field {
      margin-bottom: 10px;
    }

    label {
      display: block;
      font-size: 11px;
      color: var(--ink-soft);
      margin-bottom: 4px;
    }

    select,
    input[type="text"],
    input[type="email"],
    textarea {
      width: 100%;
      border-radius: 12px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      padding: 8px 10px;
      font-size: 13px;
      font-family: inherit;
      background: rgba(255, 255, 255, 0.9);
      outline: none;
      transition: border-color 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
    }

    select:focus,
    input:focus,
    textarea:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.5);
      background: #fff;
    }

    textarea {
      min-height: 52px;
      resize: vertical;
    }

    .disclaimer {
      margin-top: 10px;
      font-size: 11px;
      color: var(--ink-soft);
      line-height: 1.6;
    }

    .run-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-top: 12px;
    }

    .run-row-note {
      font-size: 11px;
      color: var(--ink-soft);
    }

    /* 右侧结果区 */
    .right-column {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .card {
      border-radius: var(--radius-lg);
      background: var(--bg-soft);
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(148, 163, 184, 0.5);
      padding: 14px 18px 16px;
      backdrop-filter: blur(16px);
      position: relative;
      overflow: hidden;
    }

    .card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      margin-bottom: 8px;
    }

    .card-title {
      font-size: 14px;
      font-weight: 600;
    }

    .card-subtitle {
      font-size: 12px;
      color: var(--ink-soft);
    }

    .pill-soft {
      font-size: 11px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      color: var(--ink-soft);
      background: rgba(255, 255, 255, 0.7);
    }

    .pill-live {
      border-color: rgba(34, 197, 94, 0.7);
      color: #15803d;
    }

    .pill-preview-only {
      border-style: dashed;
    }

    .diagnosis-body {
      font-size: 13px;
      line-height: 1.7;
      color: var(--ink);
    }

    .skeleton-line {
      height: 10px;
      border-radius: 999px;
      background: linear-gradient(
        90deg,
        rgba(226, 232, 240, 0.35),
        rgba(148, 163, 184, 0.55),
        rgba(226, 232, 240, 0.35)
      );
      background-size: 200% 100%;
      animation: shimmer 1.2s infinite;
      margin-bottom: 8px;
    }

    .skeleton-line:nth-child(2) { width: 92%; }
    .skeleton-line:nth-child(3) { width: 86%; }
    .skeleton-line:nth-child(4) { width: 74%; }

    @keyframes shimmer {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }

    /* 30% 预览卡片 */
    .preview-card {
      position: relative;
      padding: 14px 16px 18px;
      border-radius: 22px;
      background: rgba(255, 255, 255, 0.96);
      box-shadow: 0 20px 50px rgba(15, 23, 42, 0.16);
      border: 1px solid rgba(148, 163, 184, 0.6);
      overflow: hidden;
      color: var(--ink-soft);
      font-size: 12px;
    }

    .preview-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    .preview-title {
      font-size: 14px;
      font-weight: 600;
      color: var(--ink);
    }

    .preview-note {
      font-size: 11px;
      color: var(--ink-soft);
    }

    .badge-soft {
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.55);
      font-size: 11px;
      color: var(--ink-soft);
      background: rgba(248, 250, 252, 0.95);
    }

    .preview-text {
      margin-top: 10px;
      font-size: 13px;
      line-height: 1.7;
      color: var(--ink);
      max-height: 7.6rem;  /* 桌面：约 3–4 行 */
      overflow: hidden;
    }

    .preview-blur {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      height: 52%;
      background: linear-gradient(
        to bottom,
        rgba(248, 250, 252, 0) 0%,
        rgba(248, 250, 252, 0.96) 70%,
        rgba(248, 250, 252, 1) 100%
      );
      pointer-events: none;
    }

    .preview-footer {
      position: relative;
      margin-top: 6px;
      font-size: 11px;
      color: var(--ink-soft);
    }

    /* 付款步骤卡片 */
    .step-card-title {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .step-card-sub {
      font-size: 11px;
      color: var(--ink-soft);
      margin-bottom: 8px;
    }

    .plan-pill-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
    }

    .plan-chip {
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 11px;
      background: rgba(248, 250, 252, 0.85);
      border: 1px solid rgba(148, 163, 184, 0.6);
      color: var(--ink-soft);
    }

    .plan-chip strong {
      color: var(--ink);
    }

    .plan-price {
      font-size: 12px;
      text-align: right;
      color: var(--ink-soft);
    }

    .plan-price strong {
      font-size: 16px;
      color: var(--ink);
    }

    .plan-price small {
      font-size: 11px;
      color: var(--ink-soft);
    }

    .pay-links-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 8px;
    }

    .pay-link {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 7px 14px;
      border-radius: 999px;
      font-size: 12px;
      border: 1px dashed rgba(148, 163, 184, 0.9);
      color: #1d4ed8;
      background: rgba(239, 246, 255, 0.95);
      cursor: pointer;
      text-decoration: none;
    }

    .pay-link.secondary {
      color: #0369a1;
      border-style: dashed;
      background: rgba(224, 242, 254, 0.9);
    }

    .pay-checkbox {
      display: flex;
      align-items: flex-start;
      gap: 8px;
      font-size: 11px;
      color: var(--ink-soft);
      margin-bottom: 8px;
    }

    .pay-checkbox input {
      margin-top: 2px;
    }

    .btn-unlock {
      margin-top: 4px;
      padding: 8px 15px;
      border-radius: 999px;
      border: none;
      background: linear-gradient(135deg, #4f46e5, #2563eb);
      color: #fff;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 18px 36px rgba(37, 99, 235, 0.55);
    }

    .btn-unlock:disabled {
      opacity: 0.45;
      cursor: default;
      box-shadow: none;
    }

    .unlock-note {
      margin-top: 6px;
      font-size: 11px;
      color: var(--ink-soft);
    }

    /* 深蓝色完整申诉信 */
    .full-letter-card {
      border-radius: var(--radius-lg);
      background: radial-gradient(circle at top left, #1e293b 0, #020617 60%);
      padding: 16px 18px 18px;
      color: #e5e7eb;
      box-shadow: 0 30px 70px rgba(15, 23, 42, 0.7);
      border: 1px solid rgba(15, 23, 42, 0.75);
      position: relative;
      overflow: hidden;
    }

    .full-letter-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      gap: 8px;
    }

    .full-letter-title {
      font-size: 13px;
      font-weight: 600;
    }

    .full-letter-tag {
      font-size: 11px;
      padding: 3px 9px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.8);
      color: #cbd5f5;
    }

    .full-letter-body {
      font-size: 13px;
      line-height: 1.8;
      white-space: pre-wrap;
      max-height: 340px;
      overflow: auto;
    }

    .full-letter-body::-webkit-scrollbar {
      width: 6px;
    }
    .full-letter-body::-webkit-scrollbar-thumb {
      background: rgba(148, 163, 184, 0.8);
      border-radius: 999px;
    }

    .full-letter-footer {
      margin-top: 6px;
      font-size: 11px;
      color: rgba(148, 163, 184, 0.95);
    }

    /* 响应式 */
    @media (max-width: 960px) {
      .page {
        margin-top: 10px;
        padding: 10px 10px 32px;
      }
      .main-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    @media (max-width: 640px) {
      header {
        flex-wrap: wrap;
        border-radius: 20px;
      }

      .nav-links { display: none; }

      .hero-title {
        font-size: 20px;
      }

      .hero-left {
        padding: 14px 14px 16px;
      }

      .fieldset {
        padding: 10px 10px 6px;
      }

      .field-row {
        grid-template-columns: minmax(0, 1fr);
      }

      .preview-text {
        max-height: 11rem;  /* 手机上多显示内容 */
      }

      .preview-blur {
        height: 34%;        /* 手机上模糊减少 */
      }

      .full-letter-body {
        max-height: 260px;
      }
    }
  </style>
</head>

<body>
  <div class="page">
    <!-- 顶部导航 -->
    <header>
      <div class="brand">
        <div class="brand-avatar">A</div>
        <div>
          <div class="brand-text-main">AURUM 办公桌</div>
          <div class="brand-text-sub">账户申诉 | 账号恢复书信</div>
        </div>
      </div>

      <nav class="nav-links">
        <a href="index.html">首页</a>
        <a href="index.html#how-it-works">工作原理</a>
        <a href="pricing.html">价格</a>
        <a href="diagnosis.html" data-current="true">免费诊断</a>
      </nav>

      <div class="nav-actions">
        <button class="btn-ghost">客户端登录</button>
        <div class="badge-toggle">
          <span>访客</span>
          <span class="active">本页</span>
        </div>
      </div>
    </header>

    <!-- 主体 -->
    <div class="main-grid">
      <!-- 左侧：表单 -->
      <section class="hero-left">
        <div class="steps-row">
          <span class="step-pill">① 免费诊断</span>
          <span class="step-pill highlight">② 按需购买完整申诉信（189 美元起）</span>
        </div>

        <h1 class="hero-title">在花钱写申诉信之前，先冷静地进行书面风险评估。</h1>
        <p class="hero-desc">
          粘贴您的申诉通知和描述您的实际活动，Aurum 会生成一份书面风险诊断报告，并提供约 30% 的申诉信预览——用平台风险团队看得懂的语言，帮您把情况讲清楚。
        </p>

        <div class="hero-tags">
          <span>专为 Meta Ads、PayPal、Airbnb、亚马逊等平台设计</span>
          <span>更适合欧美平台风控的专业人士</span>
          <span>大多数案例无需开通订阅</span>
        </div>

        <div class="form-section-title">案件详情</div>
        <div class="form-hint">
          请用真实的业务语言描述。不需要“编故事”，但要尽量具体。我们不会把这些内容发给平台。
        </div>

        <form id="diagnosisForm">
          <div class="fieldset">
            <div class="field-row">
              <div class="field">
                <label for="platform">平台</label>
                <select id="platform" name="platform">
                  <option value="Meta Ads / Facebook Business" selected>Meta Ads / Facebook Business</option>
                  <option value="PayPal">PayPal</option>
                  <option value="Stripe">Stripe</option>
                  <option value="Airbnb">Airbnb</option>
                  <option value="Amazon">Amazon</option>
                  <option value="Other">其它平台</option>
                </select>
              </div>
              <div class="field">
                <label for="region">国家 / 地区</label>
                <input id="region" name="region" type="text" placeholder="US, DE, UK..." />
              </div>
            </div>

            <div class="field">
              <label for="accountUse">这个账户是用来做什么的？</label>
              <textarea id="accountUse" name="accountUse" placeholder="比如：电商广告投放、小企业收款、短租民宿、跨境电商店铺等。"></textarea>
            </div>

            <div class="field">
              <label for="noticeText">官方暂停 / 限制通知</label>
              <textarea id="noticeText" name="noticeText" placeholder="直接粘贴邮件正文或站内通知，尽量保持原文。"></textarea>
            </div>

            <div class="field">
              <label for="whatHappened">实际发生了什么？</label>
              <textarea id="whatHappened" name="whatHappened" placeholder="诚实描述：之前是否有灰色操作、被警告过、账号有几个人使用等。"></textarea>
            </div>

            <div class="field">
              <label for="whatYouDid">你已经做过什么尝试？</label>
              <textarea id="whatYouDid" name="whatYouDid" placeholder="例如：上诉过几次、改过哪些设置、是否联系过客服等。"></textarea>
            </div>

            <div class="field">
              <label for="email">电子邮件（可选，用于发送副本）</label>
              <input id="email" name="email" type="email" placeholder="you@example.com" />
            </div>
          </div>

          <div class="disclaimer">
            这不是法律意见，最终决定权在各个平台。我们的目标是帮您减少低级错误，把情况讲得更清楚、更专业。
          </div>

          <div class="run-row">
            <button type="submit" class="btn-primary" id="runBtn">
              <span class="dot" id="runDot"></span>
              Run risk diagnosis
            </button>
            <div class="run-row-note">
              本步骤只生成诊断和预览，不会触发任何付款。
            </div>
          </div>
        </form>
      </section>

      <!-- 右侧：诊断结果 & 预览 & 付款步骤 -->
      <section class="right-column">
        <!-- 风险诊断 -->
        <div class="card">
          <div class="card-header">
            <div>
              <div class="card-title">Risk diagnosis</div>
              <div class="card-subtitle">How your case looks from the platform’s internal risk perspective.</div>
            </div>
            <span class="pill-soft pill-live">LIVE PREVIEW</span>
          </div>

          <div id="diagSkeleton">
            <div class="skeleton-line"></div>
            <div class="skeleton-line"></div>
            <div class="skeleton-line"></div>
            <div class="skeleton-line"></div>
          </div>

          <div class="diagnosis-body" id="diagBody" style="display:none;">
            在这里，系统会用平台风控团队熟悉的语言，给出一份简短的风险诊断：包括这次限制更像“硬性封禁”、政策误伤，还是文档不足 / 账户结构问题等。
          </div>
        </div>

        <!-- 申诉信 30% 预览 -->
        <div class="preview-card">
          <div class="preview-header">
            <div>
              <div class="preview-title">Appeal letter preview (~30%)</div>
              <div class="preview-note">Written in calm, structured language for risk &amp; compliance teams.</div>
            </div>
            <span class="badge-soft">PREVIEW ONLY</span>
          </div>

          <div class="preview-text" id="previewText">
Dear Risk &amp; Compliance Team,

This panel shows an example of how your appeal letter will start. In the actual service we
draft this text from your real description and the platform’s notice, using calm and
professional language that a risk or compliance analyst can read quickly.

For now this is sample preview text so you can see the structure and tone that your clients
will receive before paying.
          </div>

          <div class="preview-blur"></div>
          <div class="preview-footer">
            The remaining 70%+ and export options unlock after payment in Step 2.
          </div>
        </div>

        <!-- Step 2 付款解锁 -->
        <div class="card">
          <div class="card-header">
            <div>
              <div class="step-card-title">Step 2 — Pay & unlock full appeal letter</div>
              <div class="step-card-sub">
                先看完风险诊断和预览，再决定是否需要完整申诉信。没有强制订阅。
              </div>
            </div>
            <div class="pill-soft" id="planBadge">
              建议方案：<strong>Standard appeal letter — $89</strong>
            </div>
          </div>

          <div class="plan-pill-row">
            <div class="plan-chip" id="planChipText">
              Most clients only need one case — no subscription.
            </div>
            <div class="plan-price" id="planPriceBox">
              <div><strong>$89</strong> <small>per case</small></div>
              <div style="font-size:11px;color:var(--ink-soft);" id="planMini">
                Standard appeal letter
              </div>
            </div>
          </div>

          <div class="step-card-sub">
            1. Pay using the link below.  
            您可以将自己的 Wise / Paddle / 其它收款链接替换到下面按钮。
          </div>

          <div class="pay-links-row">
            <a href="#" class="pay-link" id="mainPayLink">Main payment link (replace with your real URL)</a>
            <a href="#" class="pay-link secondary" id="backupPayLink">Backup link (optional)</a>
          </div>

          <label class="pay-checkbox">
            <input type="checkbox" id="paidCheck" />
            <span>I confirm I’ve completed the payment for this case and want to unlock the full appeal letter on this page.</span>
          </label>

          <button class="btn-unlock" id="unlockBtn" disabled>
            Generate full appeal letter
          </button>

          <div class="unlock-note">
            After payment is confirmed, the full English appeal letter for this case will appear in the dark panel below.  
            您的客户可以复制到平台表单，或导出到文档中。
          </div>
        </div>

        <!-- 完整申诉信 -->
        <div class="full-letter-card">
          <div class="full-letter-header">
            <div class="full-letter-title">完整申诉信（付款后解锁）</div>
            <span class="full-letter-tag">Final letter for platform review</span>
          </div>
          <div class="full-letter-body" id="fullLetterBody">
Dear Risk &amp; Compliance Team,

This panel will hold the complete appeal letter for your client’s case. In the actual
service we prepare a structured 1–2 page explanation that matches the platform’s policies
and the written risk diagnosis, so that your team can review the situation in a calm and
transparent way.

Right now this is sample text so you can see the layout and how a finished letter would look
on the page. When the service is live, your client will be able to copy this letter into the
platform’s appeal form or export it to a document.

Best regards,
Aurum Account Recovery Desk
          </div>
          <div class="full-letter-footer">
            提示：我们不会登录客户账户，所有文本都以“书面说明 / 申诉信”的方式提供，方便转交会计、律师或商务伙伴。
          </div>
        </div>
      </section>
    </div>
  </div>

  <!-- 逻辑脚本 -->
  <script>
    const form = document.getElementById("diagnosisForm");
    const runBtn = document.getElementById("runBtn");
    const runDot = document.getElementById("runDot");
    const diagSkeleton = document.getElementById("diagSkeleton");
    const diagBody = document.getElementById("diagBody");
    const previewText = document.getElementById("previewText");
    const fullLetterBody = document.getElementById("fullLetterBody");

    const planBadge = document.getElementById("planBadge");
    const planChipText = document.getElementById("planChipText");
    const planPriceBox = document.getElementById("planPriceBox");
    const planMini = document.getElementById("planMini");
    const mainPayLink = document.getElementById("mainPayLink");
    const backupPayLink = document.getElementById("backupPayLink");

    const paidCheck = document.getElementById("paidCheck");
    const unlockBtn = document.getElementById("unlockBtn");

    let lastPayload = null;

    const DEFAULT_RISK_TEXT =
      "在这里，系统会用平台风控团队熟悉的语言，给出一份简短的风险诊断：包括这次限制更像“硬性封禁”、政策误伤，还是文档不足 / 账户结构问题等。";

    const DEFAULT_PREVIEW_TEXT = previewText.textContent.trim();

    function setRunning(running) {
      if (running) {
        runBtn.disabled = true;
        runBtn.textContent = "Running diagnosis…";
        runDot.style.animation = "pulse 1s infinite";
        diagSkeleton.style.display = "block";
        diagBody.style.display = "none";
      } else {
        runBtn.disabled = false;
        runBtn.textContent = "Run risk diagnosis";
        runDot.style.animation = "none";
      }
    }

    // 推荐方案显示
    function applyPlan(planKey) {
      let title = "Standard appeal letter — $89";
      let chip = "Most clients only need one case — no subscription.";
      let priceHtml =
        '<div><strong>$89</strong> <small>per case</small></div>' +
        '<div style="font-size:11px;color:var(--ink-soft);">Standard appeal letter</div>';

      if (planKey === "recovery") {
        title = "Recovery pack — $189";
        chip = "For complex cases: multiple flags, payment risk or multi-platform cases.";
        priceHtml =
          '<div><strong>$189</strong> <small>per case</small></div>' +
          '<div style="font-size:11px;color:var(--ink-soft);">Recovery pack for complex cases</div>';
      } else if (planKey === "desk") {
        title = "Ongoing desk — $380 / month";
        chip = "For agencies or operators who manage many accounts and need standing support.";
        priceHtml =
          '<div><strong>$380</strong> <small>per month</small></div>' +
          '<div style="font-size:11px;color:var(--ink-soft);">Ongoing desk for agencies / operators</div>';
      }

      planBadge.innerHTML = "建议方案：<strong>" + title + "</strong>";
      planChipText.textContent = chip;
      planPriceBox.innerHTML = priceHtml;
    }

    // 绑定默认 plan（如果有的话，可以从 URL 参数解析，这里简单默认 standard）
    applyPlan("standard");

    // ===== Step1: 调用 Workers 诊断 API =====
    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const payload = {
        platform: document.getElementById("platform").value,
        region: document.getElementById("region").value,
        accountUse: document.getElementById("accountUse").value,
        noticeText: document.getElementById("noticeText").value,
        whatHappened: document.getElementById("whatHappened").value,
        whatYouDid: document.getElementById("whatYouDid").value,
        email: document.getElementById("email").value,
        initialPlan: "standard",
      };

      lastPayload = payload;
      setRunning(true);

      try {
        const res = await fetch("https://aurum-task-worker.sophieinbg.workers.dev/api/diagnosis", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload),
        });

        const data = await res.json();

        diagSkeleton.style.display = "none";
        diagBody.style.display = "block";

        if (!data.ok) {
          diagBody.textContent =
            "There was a temporary system error while generating the written diagnosis. Please try again later.";
          previewText.textContent = DEFAULT_PREVIEW_TEXT;
          applyPlan("standard");
          return;
        }

        diagBody.textContent = data.risk || DEFAULT_RISK_TEXT;
        previewText.textContent = data.preview || DEFAULT_PREVIEW_TEXT;
        applyPlan(data.suggestedPlan || "standard");
      } catch (err) {
        diagSkeleton.style.display = "none";
        diagBody.style.display = "block";
        diagBody.textContent =
          "There was a temporary system error while generating the written diagnosis. Please try again in a moment.";
        previewText.textContent = DEFAULT_PREVIEW_TEXT;
        applyPlan("standard");
      } finally {
        setRunning(false);
      }
    });

    // 勾选付款复选框后，按钮可用
    paidCheck.addEventListener("change", () => {
      unlockBtn.disabled = !paidCheck.checked;
    });

    // ===== Step2: 生成完整申诉信 =====
    unlockBtn.addEventListener("click", async () => {
      if (!paidCheck.checked || !lastPayload || unlockBtn.disabled) return;

      unlockBtn.disabled = true;
      unlockBtn.textContent = "Generating full appeal…";

      try {
        const res = await fetch("https://aurum-task-worker.sophieinbg.workers.dev/api/full-letter", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            ...lastPayload,
            planFromPricing: "client-selected",
            riskSummary: diagBody.textContent || "",
          }),
        });

        const data = await res.json();

        if (!data.ok || !data.fullLetter) {
          fullLetterBody.textContent =
            "We could not generate a full letter at this moment. Please try again or contact support with your case details.";
        } else {
          fullLetterBody.textContent = data.fullLetter;
        }
      } catch (err) {
        fullLetterBody.textContent =
          "Network or system error while generating full letter. Please try again later.";
      } finally {
        unlockBtn.textContent = "Generate full appeal letter";
        unlockBtn.disabled = !paidCheck.checked;
      }
    });
  </script>
</body>
</html>
