<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Aurum Task Desk — Task Desk & Preview</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Favicon -->
  <link rel="icon" href="favicon.png" />
  <link rel="icon" type="image/png" href="favicon.png" />

  <!-- Google tag (gtag.js) — 和首页一样保留 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-NEY7RNB5S"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-NEY7RNB5S');
  </script>

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    :root {
      --bg-deep: #020617;
      --bg-card: #020617;
      --bg-card-soft: #020617;
      --border-subtle: rgba(148, 163, 184, 0.35);
      --text-main: #e5e7eb;
      --text-soft: #9ca3af;
      --gold: #fbbf24;
      --gold-soft: rgba(251, 191, 36, 0.16);
      --accent-blue: #38bdf8;
      --shadow-strong: 0 32px 120px rgba(0,0,0,0.9);
      --radius-xl: 24px;
      --radius-lg: 16px;
      --radius-pill: 999px;
      --blur-strong: 40px;
    }
    body {
      min-height: 100vh;
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", system-ui,
        "Segoe UI", sans-serif;
      background:
        radial-gradient(circle at top, #020617 0%, #020617 40%, #000 100%);
      color: var(--text-main);
      display: flex;
      justify-content: center;
      padding: 24px 12px 48px;
    }
    .page-shell {
      width: 100%;
      max-width: 1120px;
      margin: 0 auto;
    }

    /* 顶部导航 */
    .top-nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 20px;
    }
    .brand-block {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .brand-avatar {
      width: 40px;
      height: 40px;
      border-radius: 999px;
      background: conic-gradient(
        from 180deg,
        #fbbf24,
        #38bdf8,
        #4f46e5,
        #fbbf24
      );
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 12px 40px rgba(15, 23, 42, 0.7);
    }
    .brand-avatar-inner {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 0%, #1f2937 0%, #020617 55%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 15px;
      font-weight: 600;
      color: #e5e7eb;
    }
    .brand-text-block {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }
    .brand-name {
      font-size: 16px;
      font-weight: 600;
      letter-spacing: 0.02em;
    }
    .brand-sub {
      font-size: 12px;
      color: var(--text-soft);
    }

    .nav-links {
      display: flex;
      align-items: center;
      gap: 18px;
      font-size: 13px;
    }
    .nav-links a {
      color: #e5e7eb;
      text-decoration: none;
      opacity: 0.85;
      transition: opacity 0.15s ease, transform 0.15s ease;
    }
    .nav-links a:hover {
      opacity: 1;
      transform: translateY(-1px);
    }
    .nav-links span {
      color: var(--text-soft);
      font-size: 12px;
    }

    .lang-toggle {
      display: inline-flex;
      align-items: center;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      padding: 2px;
      background: radial-gradient(circle at top left,#111827,#020617);
    }
    .lang-btn {
      border: none;
      outline: none;
      padding: 4px 10px;
      font-size: 11px;
      border-radius: 999px;
      background: transparent;
      color: var(--text-soft);
      cursor: pointer;
      transition: all 0.18s ease;
    }
    .lang-btn.active {
      background: rgba(15, 23, 42, 0.9);
      color: #f9fafb;
      box-shadow: 0 0 0 1px rgba(148, 163, 184, 0.4);
    }

    .primary-btn {
      border-radius: 999px;
      border: none;
      background: linear-gradient(120deg,#fbbf24,#f97316);
      color: #111827;
      padding: 8px 16px;
      font-size: 12px;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      box-shadow: 0 12px 45px rgba(15,23,42,0.9);
      transition: transform 0.14s ease, box-shadow 0.14s ease, filter 0.14s ease;
    }
    .primary-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 18px 70px rgba(15,23,42,1);
      filter: brightness(1.03);
    }
    .primary-btn span.icon {
      font-size: 14px;
    }

    /* 主体布局 */
    .desk-main-card {
      margin-top: 6px;
      border-radius: var(--radius-xl);
      background:
        radial-gradient(circle at top left, rgba(59, 130, 246, 0.16) 0%, transparent 60%),
        radial-gradient(circle at bottom right, rgba(251, 191, 36, 0.06) 0%, transparent 55%),
        rgba(15, 23, 42, 0.96);
      border: 1px solid rgba(15, 23, 42, 0.95);
      box-shadow: var(--shadow-strong);
      padding: 20px 22px 22px;
      backdrop-filter: blur(var(--blur-strong));
    }

    .flow-head {
      border-radius: var(--radius-lg);
      border: 1px dashed rgba(148, 163, 184, 0.6);
      padding: 16px 16px 14px;
      background:
        radial-gradient(circle at top left, rgba(15, 23, 42, 0.95), rgba(15, 23, 42, 0.96));
      margin-bottom: 16px;
    }
    .flow-head-title-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
      gap: 8px;
    }
    .flow-pill {
      font-size: 11px;
      color: var(--text-soft);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }
    .flow-pill-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 0%, #22c55e, #15803d);
      box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.16);
    }
    .flow-title-block {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    .flow-title {
      font-size: 17px;
      font-weight: 600;
      letter-spacing: 0.01em;
    }
    .flow-subtitle {
      font-size: 12px;
      color: var(--text-soft);
      max-width: 620px;
    }
    .flow-chips {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 8px;
      margin-top: 10px;
    }
    .flow-chip {
      border-radius: 999px;
      padding: 8px 12px;
      border: 1px dashed rgba(148, 163, 184, 0.5);
      font-size: 11px;
      color: var(--text-soft);
      background: radial-gradient(circle at top,#020617,#020617);
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .flow-chip span.label {
      font-weight: 500;
      color: #e5e7eb;
    }
    .flow-chip-badge {
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      color: var(--text-soft);
    }

    /* 下半部分布局 */
    .desk-layout {
      display: grid;
      grid-template-columns: minmax(0, 370px) minmax(0, 1fr);
      gap: 16px;
      align-items: stretch;
    }

    .service-card {
      border-radius: var(--radius-lg);
      border: 1px solid rgba(148, 163, 184, 0.4);
      background:
        radial-gradient(circle at top left, rgba(15, 23, 42, 0.9), rgba(15, 23, 42, 0.98));
      padding: 14px 14px 10px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .service-card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 4px;
    }
    .service-card-title {
      font-size: 13px;
      font-weight: 500;
      color: var(--text-soft);
    }
    .service-card-mini {
      font-size: 11px;
      color: var(--text-soft);
    }

    .service-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .service-item {
      position: relative;
      border-radius: 999px;
      padding: 10px 12px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      background:
        radial-gradient(circle at top left, rgba(15,23,42,0.95), rgba(15,23,42,0.98));
      display: flex;
      align-items: center;
      gap: 10px;
      justify-content: space-between;
      cursor: pointer;
      overflow: hidden;
      transition: border-color 0.14s ease, box-shadow 0.16s ease,
                  transform 0.14s ease, background 0.16s ease;
    }
    .service-item::before {
      content: "";
      position: absolute;
      inset: 0;
      opacity: 0;
      background: radial-gradient(circle at 0 0, rgba(59, 130, 246, 0.2), transparent 60%);
      transition: opacity 0.18s ease;
      pointer-events: none;
    }
    .service-item:hover::before {
      opacity: 1;
    }
    .service-item:hover {
      transform: translateY(-1px);
      box-shadow: 0 18px 60px rgba(15, 23, 42, 0.9);
    }
    .service-item.active {
      border-color: var(--gold);
      box-shadow: 0 20px 70px rgba(15, 23, 42, 1);
      background:
        linear-gradient(120deg, rgba(251, 191, 36, 0.08), rgba(15, 23, 42, 0.98));
    }

    .service-item-main {
      display: flex;
      align-items: center;
      gap: 10px;
      flex: 1;
      min-width: 0;
    }
    .service-icon-wrap {
      width: 26px;
      height: 26px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at 30% 0%, #020617,#020617);
      box-shadow: 0 7px 20px rgba(15,23,42,0.9);
      flex-shrink: 0;
    }
    .service-icon-inner {
      width: 16px;
      height: 16px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.9);
      background: radial-gradient(circle at 30% 0%, #0f172a,#020617);
    }
    .service-text-block {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
}

/* 主标题：变成很亮的字 */
.service-title {
  font-size: 13px;
  font-weight: 600;
  color: #e5e7eb;           /* 新增这一行 */
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* 副标题：稍微浅一点，但仍然清晰可见 */
.service-sub {
  font-size: 11px;
  color: rgba(148, 163, 184, 0.95);  /* 比之前更亮一点 */
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* 选中状态再稍微提高对比度 */
.service-item.active .service-title {
  color: #f9fafb;
}
.service-item.active .service-sub {
  color: rgba(209, 213, 219, 0.95);
}

    .service-sub {
      font-size: 11px;
      color: #d5e1ff;        /* 调亮，方便看清 */
      opacity: 0.96;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .service-price {
      font-size: 12px;
      font-weight: 600;
      color: var(--gold);
      white-space: nowrap;
      margin-left: 8px;
    }

    /* 右侧预览面板 */
    .preview-panel {
      border-radius: var(--radius-lg);
      border: 1px solid rgba(148, 163, 184, 0.4);
      background:
        radial-gradient(circle at top right, rgba(56, 189, 248, 0.16), transparent 55%),
        radial-gradient(circle at bottom left, rgba(251, 191, 36, 0.12), transparent 60%),
        rgba(15, 23, 42, 0.96);
      padding: 14px 14px 16px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      position: relative;
      overflow: hidden;
    }
    .preview-panel::after {
      content: "DESK";
      position: absolute;
      right: -20px;
      bottom: -10px;
      font-size: 40px;
      letter-spacing: 0.15em;
      color: rgba(15, 23, 42, 0.8);
      font-weight: 700;
      pointer-events: none;
    }
    .preview-header-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }
    .preview-title-block {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }
    .preview-title {
      font-size: 14px;
      font-weight: 600;
      letter-spacing: 0.03em;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .preview-title-pill {
      font-size: 10px;
      padding: 1px 7px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.7);
      color: var(--text-soft);
    }
    .preview-subtitle {
      font-size: 12px;
      color: var(--text-soft);
      max-width: 420px;
    }
    .preview-hint-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 4px;
    }
    .preview-hint-pill {
      font-size: 10px;
      border-radius: 999px;
      border: 1px dashed rgba(148, 163, 184, 0.5);
      padding: 2px 8px;
      color: var(--text-soft);
      background: rgba(15, 23, 42, 0.9);
    }

    .preview-form {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 8px 10px;
      margin-top: 4px;
    }
    .preview-form-full {
      grid-column: 1 / -1;
    }
    .preview-label {
      font-size: 11px;
      color: var(--text-soft);
      margin-bottom: 3px;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    .preview-label span.badge {
      font-size: 9px;
      border-radius: 999px;
      padding: 0 6px;
      border: 1px solid rgba(148, 163, 184, 0.7);
    }
    .preview-input,
    .preview-select,
    .preview-textarea {
      width: 100%;
      border-radius: 10px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 0.9);
      color: #e5e7eb;
      font-size: 12px;
      padding: 6px 8px;
      outline: none;
      resize: vertical;
      min-height: 0;
      transition: border-color 0.14s ease, box-shadow 0.14s ease, background 0.14s ease;
    }
    .preview-input:focus,
    .preview-select:focus,
    .preview-textarea:focus {
      border-color: var(--accent-blue);
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.45);
      background: rgba(15, 23, 42, 0.96);
    }
    .preview-select {
      padding-right: 22px;
    }
    .preview-textarea {
      min-height: 80px;
      line-height: 1.4;
    }

    .preview-footer-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-top: 4px;
    }
    .preview-left-buttons {
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .preview-secondary-btn {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 0.9);
      color: var(--text-main);
      padding: 6px 11px;
      font-size: 11px;
      display: inline-flex;
      align-items: center;
      gap: 5px;
      cursor: pointer;
      transition: all 0.14s ease;
    }
    .preview-secondary-btn:hover {
      background: rgba(15, 23, 42, 1);
      box-shadow: 0 10px 36px rgba(15, 23, 42, 0.9);
      transform: translateY(-0.5px);
    }
    .preview-generate-btn {
      border-radius: 999px;
      border: none;
      background: linear-gradient(120deg,#22c55e,#16a34a);
      color: #022c22;
      padding: 7px 18px;
      font-size: 12px;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      box-shadow: 0 16px 55px rgba(6, 95, 70, 0.7);
      transition: transform 0.14s ease, box-shadow 0.14s ease, filter 0.14s ease;
      white-space: nowrap;
    }
    .preview-generate-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 22px 70px rgba(6, 95, 70, 0.9);
      filter: brightness(1.02);
    }
    .preview-generate-btn[disabled] {
      opacity: 0.7;
      cursor: default;
      transform: none;
      box-shadow: 0 12px 32px rgba(6, 95, 70, 0.5);
    }
    .preview-status {
      font-size: 11px;
      color: var(--text-soft);
    }

    .preview-box {
      margin-top: 8px;
      border-radius: 12px;
      border: 1px dashed rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 0.9);
      padding: 8px 10px;
      max-height: 180px;
      overflow: auto;
      font-size: 12px;
      line-height: 1.45;
      white-space: pre-wrap;
      color: #e5e7eb;
    }
    .preview-placeholder {
      color: rgba(148, 163, 184, 0.9);
      font-size: 11px;
    }

    /* 响应式 */
    @media (max-width: 920px) {
      .desk-layout {
        grid-template-columns: minmax(0, 1fr);
      }
      .preview-panel::after {
        display: none;
      }
    }
    @media (max-width: 640px) {
      body {
        padding: 16px 8px 32px;
      }
      .desk-main-card {
        padding: 14px 12px 16px;
      }
      .flow-chips {
        grid-template-columns: minmax(0, 1fr);
      }
      .preview-form {
        grid-template-columns: minmax(0, 1fr);
      }
      .preview-footer-row {
        flex-direction: column;
        align-items: flex-start;
      }
      .preview-left-buttons {
        width: 100%;
        justify-content: flex-start;
        flex-wrap: wrap;
      }
    }
  </style>
</head>
<body>
  <div class="page-shell">
    <!-- 顶部导航 -->
    <header class="top-nav">
      <div class="brand-block">
        <div class="brand-avatar">
          <div class="brand-avatar-inner">AU</div>
        </div>
        <div class="brand-text-block">
          <div class="brand-name">Aurum Task Desk</div>
          <div class="brand-sub" id="brandSubText">
            Quiet writing & resolution desk
          </div>
        </div>
      </div>

      <nav class="nav-links">
        <a href="index.html" id="navHome">Home</a>
        <a href="index.html#services" id="navServices">Services</a>
        <a href="index.html#flow" id="navFlow">Flow</a>
        <a href="index.html#why" id="navWhy">Why not ChatGPT</a>
        <a href="pricing.html" id="navPricing">Pricing</a>
        <span>|</span>
        <div class="lang-toggle">
          <button class="lang-btn active" data-lang="en" id="btnLangEn">EN</button>
          <button class="lang-btn" data-lang="zh" id="btnLangZh">中</button>
        </div>
        <button class="primary-btn" onclick="window.location.href='auth.html'">
          <span class="icon">★</span>
          <span id="loginBtnText">Login / My Desk</span>
        </button>
      </nav>
    </header>

    <!-- 主体卡片 -->
    <main class="desk-main-card">
      <!-- Flow 头部说明 -->
      <section class="flow-head">
        <div class="flow-head-title-row">
          <div class="flow-title-block">
            <div class="flow-pill">
              <span class="flow-pill-dot"></span>
              <span id="flowPillText">Flow</span>
            </div>
            <div class="flow-title" id="flowTitle">
              Starting a task is intentionally simple
            </div>
            <p class="flow-subtitle" id="flowSubtitle">
              This page lets you pick one serious scenario and open a focused task desk.
              You can always change scenario later — nothing is submitted until you confirm inside your Desk.
            </p>
          </div>
        </div>
        <div class="flow-chips">
          <div class="flow-chip">
            <span class="flow-chip-badge">Step 1</span>
            <span class="label" id="flowChip1Label">Share what happened.</span>
            <span id="flowChip1Text">
              Upload screenshots, letters, or describe the situation in your own words.
            </span>
          </div>
          <div class="flow-chip">
            <span class="flow-chip-badge">Step 2</span>
            <span class="label" id="flowChip2Label">Clarify who and what.</span>
            <span id="flowChip2Text">
              Tell us who you are writing to (lawyer, embassy, insurer, employer, airline) and your ideal outcome.
            </span>
          </div>
          <div class="flow-chip">
            <span class="flow-chip-badge">Step 3</span>
            <span class="label" id="flowChip3Label">Receive a ready-to-submit letter.</span>
            <span id="flowChip3Text">
              You review, add personal details if needed, and then send it on — email, portal or print.
            </span>
          </div>
        </div>
      </section>

      <!-- 下半部分：左边服务 + 右边预览窗口 -->
      <section class="desk-layout">
        <!-- 左侧服务列表 -->
        <aside class="service-card">
          <div class="service-card-header">
            <div class="service-card-title" id="serviceCardTitle">
              5 core services
            </div>
            <div class="service-card-mini" id="serviceCardMini">
              Pick one scenario to open a desk
            </div>
          </div>

          <div class="service-list" id="serviceList">
            <button
              type="button"
              class="service-item active"
              data-task="Legal letters & contract drafts">
              <div class="service-item-main">
                <div class="service-icon-wrap">
                  <div class="service-icon-inner"></div>
                </div>
                <div class="service-text-block">
                  <div class="service-title" id="svc1Title">
                    Legal letters & contract drafts
                  </div>
                  <div class="service-sub" id="svc1Sub">
                    Disputes, refunds, landlord, employer, vendor, partner…
                  </div>
                </div>
              </div>
              <div class="service-price">USD 29.9</div>
            </button>

            <button
              type="button"
              class="service-item"
              data-task="Insurance & airline claim letters">
              <div class="service-item-main">
                <div class="service-icon-wrap">
                  <div class="service-icon-inner"></div>
                </div>
                <div class="service-text-block">
                  <div class="service-title" id="svc2Title">
                    Insurance & airline claim letters
                  </div>
                  <div class="service-sub" id="svc2Sub">
                    Travel disruption, baggage loss, medical & policy claims.
                  </div>
                </div>
              </div>
              <div class="service-price">USD 24.9</div>
            </button>

            <button
              type="button"
              class="service-item"
              data-task="Immigration letters & RFE explanations">
              <div class="service-item-main">
                <div class="service-icon-wrap">
                  <div class="service-icon-inner"></div>
                </div>
                <div class="service-text-block">
                  <div class="service-title" id="svc3Title">
                    Immigration letters & RFE explanations
                  </div>
                  <div class="service-sub" id="svc3Sub">
                    Embassy, USCIS, appeal notes, employer support letters.
                  </div>
                </div>
              </div>
              <div class="service-price">USD 39.9</div>
            </button>

            <button
              type="button"
              class="service-item"
              data-task="Family & emotional crisis letters">
              <div class="service-item-main">
                <div class="service-icon-wrap">
                  <div class="service-icon-inner"></div>
                </div>
                <div class="service-text-block">
                  <div class="service-title" id="svc4Title">
                    Family & emotional crisis letters
                  </div>
                  <div class="service-sub" id="svc4Sub">
                    Calm letters to partners, children, parents & relatives.
                  </div>
                </div>
              </div>
              <div class="service-price">USD 19.9</div>
            </button>

            <button
              type="button"
              class="service-item"
              data-task="Complaint & escalation services">
              <div class="service-item-main">
                <div class="service-icon-wrap">
                  <div class="service-icon-inner"></div>
                </div>
                <div class="service-text-block">
                  <div class="service-title" id="svc5Title">
                    Complaint & escalation services
                  </div>
                  <div class="service-sub" id="svc5Sub">
                    Escalate politely to managers, ombudsman, regulator.
                  </div>
                </div>
              </div>
              <div class="service-price">USD 29.9</div>
            </button>
          </div>
        </aside>

        <!-- 右侧预览窗口 -->
        <section class="preview-panel">
          <div class="preview-header-row">
            <div class="preview-title-block">
              <div class="preview-title" id="previewTitle">
                Preview draft window
                <span class="preview-title-pill" id="previewTitlePill">
                  Private preview · about 30% content
                </span>
              </div>
              <p class="preview-subtitle" id="previewSubtitle">
                This is a quiet preview box. You can sketch 30% of the draft here,
                adjust wording, and only submit formally later inside your own Desk.
              </p>
            </div>
          </div>

          <div class="preview-hint-row">
            <div class="preview-hint-pill" id="previewHint1">
              ✓ No login required for preview
            </div>
            <div class="preview-hint-pill" id="previewHint2">
              ✓ Nothing is sent until you confirm
            </div>
            <div class="preview-hint-pill" id="previewHint3">
              ✓ You can still change everything later
            </div>
          </div>

          <div class="preview-form">
            <div>
              <div class="preview-label">
                <span id="lblTaskType">Task type</span>
                <span class="badge" id="lblTaskTypeBadge">Auto from left</span>
              </div>
              <input
                id="taskTypeInput"
                class="preview-input"
                type="text"
                value="Legal letters & contract drafts"
              />
            </div>

            <div>
              <div class="preview-label">
                <span id="lblLanguage">Language</span>
              </div>
              <select id="languageSelect" class="preview-select">
                <option value="English">English</option>
                <option value="中文">中文</option>
              </select>
            </div>

            <div>
              <div class="preview-label">
                <span id="lblTone">Tone</span>
              </div>
              <select id="toneSelect" class="preview-select">
                <option value="calm, respectful">Calm, respectful</option>
                <option value="firm, polite">Firm, polite</option>
                <option value="urgent but respectful">Urgent but respectful</option>
              </select>
            </div>

            <div>
              <div class="preview-label">
                <span id="lblRecipient">Recipient (optional)</span>
              </div>
              <input
                id="recipientInput"
                class="preview-input"
                type="text"
                placeholder="e.g. airline, landlord, lawyer, embassy"
              />
            </div>

            <div class="preview-form-full">
              <div class="preview-label">
                <span id="lblDetails">What happened? (you can be brief)</span>
              </div>
              <textarea
                id="detailsTextarea"
                class="preview-textarea"
                placeholder="Describe the situation in your own words. You can keep it short, we will expand it for you."
              ></textarea>
            </div>
          </div>

          <div class="preview-footer-row">
            <div class="preview-left-buttons">
              <button type="button" class="preview-secondary-btn" id="btnClear">
                <span>Reset</span>
              </button>
              <button type="button" class="preview-secondary-btn" id="btnPasteExample">
                <span id="btnPasteExampleText">Paste an example case</span>
              </button>
            </div>
            <div class="preview-left-buttons">
              <button type="button" class="preview-generate-btn" id="previewGenerateBtn">
                <span id="previewGenerateBtnText">Generate preview draft</span>
              </button>
              <div class="preview-status" id="previewStatus">
                <span id="previewStatusText">
                  The system will generate about 30% of a draft as a private preview only.
                </span>
              </div>
            </div>
          </div>

          <div class="preview-box" id="previewBox">
            <div class="preview-placeholder" id="previewPlaceholder">
              Your preview draft will appear here. It is not saved, not sent
              to any company or person. When you are happy with the direction,
              you can open a full Desk and continue privately.
            </div>
            <div id="previewContent" style="display:none;"></div>
          </div>
        </section>
      </section>
    </main>
  </div>

  <script>
    // ========== 左侧服务可点击 ==========
    const serviceItems = document.querySelectorAll(".service-item");
    const taskTypeInput = document.getElementById("taskTypeInput");

    serviceItems.forEach((btn) => {
      btn.addEventListener("click", () => {
        serviceItems.forEach((b) => b.classList.remove("active"));
        btn.classList.add("active");
        const task = btn.getAttribute("data-task") || "";
        if (task) {
          taskTypeInput.value = task;
        }
      });
    });

    // ========== 预览生成 ==========
    const previewGenerateBtn = document.getElementById("previewGenerateBtn");
    const previewStatusText = document.getElementById("previewStatusText");
    const previewPlaceholder = document.getElementById("previewPlaceholder");
    const previewContent = document.getElementById("previewContent");
    const toneSelect = document.getElementById("toneSelect");
    const languageSelect = document.getElementById("languageSelect");
    const recipientInput = document.getElementById("recipientInput");
    const detailsTextarea = document.getElementById("detailsTextarea");

    async function callPreview() {
      const taskType = (taskTypeInput.value || "").trim() || "写作任务";
      const tone = (toneSelect.value || "calm, respectful").toString();
      const language = (languageSelect.value || "English").toString();
      const recipient = (recipientInput.value || "").toString();
      const details = (detailsTextarea.value || "").toString();

      previewGenerateBtn.disabled = true;
      previewStatusText.textContent = language === "中文"
        ? "正在为你生成预览草稿…"
        : "The system is preparing a preview draft for you…";

      try {
        const res = await fetch("/api/generate", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            taskType,
            tone,
            language,
            recipient,
            details
          })
        });

        if (!res.ok) {
          throw new Error("HTTP " + res.status);
        }
        const data = await res.json();

        if (!data.ok || !data.preview) {
          throw new Error(data.error || "Empty response");
        }

        previewPlaceholder.style.display = "none";
        previewContent.style.display = "block";
        previewContent.textContent = data.preview;

        previewStatusText.textContent = language === "中文"
          ? "预览完成。你可以修改细节，再次生成，或稍后在正式任务中继续。"
          : "Preview ready. You can adjust details, generate again, or continue later inside a full Desk.";
      } catch (err) {
        console.error(err);
        previewStatusText.textContent = languageSelect.value === "中文"
          ? "抱歉，预览暂时失败，请稍后再试。"
          : "Sorry, the preview failed for now. Please try again in a moment.";
      } finally {
        previewGenerateBtn.disabled = false;
      }
    }

    previewGenerateBtn.addEventListener("click", () => {
      callPreview();
    });

    // ========== 辅助按钮 ==========
    document.getElementById("btnClear").addEventListener("click", () => {
      recipientInput.value = "";
      detailsTextarea.value = "";
      previewContent.textContent = "";
      previewContent.style.display = "none";
      previewPlaceholder.style.display = "block";
      previewStatusText.textContent = languageSelect.value === "中文"
        ? "系统会生成约 30% 的预览草稿，不会保存也不会发送。"
        : "The system will generate about 30% of a draft as a private preview only.";
    });

    document.getElementById("btnPasteExample").addEventListener("click", () => {
      if (detailsTextarea.value.trim()) return;
      if (languageSelect.value === "中文") {
        detailsTextarea.value =
          "我在回国旅途中遇到航班大面积延误，导致我无法按时转机并错过后续行程，航空公司只提供了很少的餐食券，也没有给出明确的赔偿方案。";
      } else {
        detailsTextarea.value =
          "During my return trip, my flight was heavily delayed which made me miss my connection and important meetings. The airline only gave a small meal voucher and has not offered a clear compensation plan.";
      }
    });

    // ========== 中英文切换 ==========
    const langButtons = document.querySelectorAll(".lang-btn");
    const i18n = {
      en: {
        brandSub: "Quiet writing & resolution desk",
        navHome: "Home",
        navServices: "Services",
        navFlow: "Flow",
        navWhy: "Why not ChatGPT",
        navPricing: "Pricing",
        loginBtn: "Login / My Desk",
        flowPill: "Flow",
        flowTitle: "Starting a task is intentionally simple",
        flowSubtitle:
          "This page lets you pick one serious scenario and open a focused task desk. You can always change scenario later — nothing is submitted until you confirm inside your Desk.",
        chip1Label: "Share what happened.",
        chip1Text:
          "Upload screenshots, letters, or describe the situation in your own words.",
        chip2Label: "Clarify who and what.",
        chip2Text:
          "Tell us who you are writing to and what outcome you hope for.",
        chip3Label: "Receive a ready-to-submit letter.",
        chip3Text:
          "You review, add personal details if needed, and then send it on.",
        serviceCardTitle: "5 core services",
        serviceCardMini: "Pick one scenario to open a desk",
        previewTitle: "Preview draft window",
        previewTitlePill: "Private preview · about 30% content",
        previewSubtitle:
          "This is a quiet preview box. You can sketch 30% of the draft here, adjust wording, and only submit formally later inside your own Desk.",
        previewHint1: "✓ No login required for preview",
        previewHint2: "✓ Nothing is sent until you confirm",
        previewHint3: "✓ You can still change everything later",
        lblTaskType: "Task type",
        lblTaskTypeBadge: "Auto from left",
        lblLanguage: "Language",
        lblTone: "Tone",
        lblRecipient: "Recipient (optional)",
        lblDetails: "What happened? (you can be brief)",
        btnExample: "Paste an example case",
        btnPreview: "Generate preview draft",
        statusDefault:
          "The system will generate about 30% of a draft as a private preview only.",
        previewPlaceholder:
          "Your preview draft will appear here. It is not saved, not sent to any company or person. When you are happy with the direction, you can open a full Desk and continue privately."
      },
      zh: {
        brandSub: "安静而专业的写作与申诉任务台",
        navHome: "首页",
        navServices: "服务",
        navFlow: "流程",
        navWhy: "为什么不用 ChatGPT 直接自己写",
        navPricing: "价格",
        loginBtn: "登录 / 我的任务台",
        flowPill: "流程",
        flowTitle: "开始一个任务，刻意被设计得很简单",
        flowSubtitle:
          "在这里，你只需先选一个最重要的场景，打开一个专注的任务台。后面随时可以调整场景，只有在你确认后才会正式提交。",
        chip1Label: "先说清楚发生了什么。",
        chip1Text:
          "可以上传截图、信件，或者用你自己的话简单描述情况，不需要完美。",
        chip2Label: "再说明对象和诉求。",
        chip2Text:
          "告诉我们你要写给谁（律师、领馆、保险公司、雇主、航空公司等）以及理想结果。",
        chip3Label: "拿到一封可以直接递交的信。",
        chip3Text:
          "你可以再补充个人信息、删改语气，确认后再通过邮箱、系统或打印寄出。",
        serviceCardTitle: "5 个核心服务场景",
        serviceCardMini: "先选一个场景打开任务台",
        previewTitle: "预览草稿小窗口",
        previewTitlePill: "仅生成约 30% 预览内容",
        previewSubtitle:
          "这是一个安静的小预览框，你可以先起草大约 30% 的内容，调整语气和结构，真正提交会在你自己的任务台里完成。",
        previewHint1: "✓ 无需登录即可预览",
        previewHint2: "✓ 未确认前不会正式递交",
        previewHint3: "✓ 后面可以随时全部修改",
        lblTaskType: "任务类型",
        lblTaskTypeBadge: "从左侧自动带入",
        lblLanguage: "写作语言",
        lblTone: "语气",
        lblRecipient: "收件方（可选）",
        lblDetails: "简单讲讲发生了什么",
        btnExample: "粘贴一个示例案例",
        btnPreview: "生成预览草稿",
        statusDefault:
          "系统会生成约 30% 的预览草稿，不会保存也不会发送。",
        previewPlaceholder:
          "预览草稿会显示在这里。它不会被保存，也不会发给任何人。确认方向后，你可以在完整任务台中，在更私密的环境继续完善。"
      }
    };

    function applyLang(lang) {
      const t = i18n[lang] || i18n.en;
      document.getElementById("brandSubText").textContent = t.brandSub;
      document.getElementById("navHome").textContent = t.navHome;
      document.getElementById("navServices").textContent = t.navServices;
      document.getElementById("navFlow").textContent = t.navFlow;
      document.getElementById("navWhy").textContent = t.navWhy;
      document.getElementById("navPricing").textContent = t.navPricing;
      document.getElementById("loginBtnText").textContent = t.loginBtn;

      document.getElementById("flowPillText").textContent = t.flowPill;
      document.getElementById("flowTitle").textContent = t.flowTitle;
      document.getElementById("flowSubtitle").textContent = t.flowSubtitle;
      document.getElementById("flowChip1Label").textContent = t.chip1Label;
      document.getElementById("flowChip1Text").textContent = t.chip1Text;
      document.getElementById("flowChip2Label").textContent = t.chip2Label;
      document.getElementById("flowChip2Text").textContent = t.chip2Text;
      document.getElementById("flowChip3Label").textContent = t.chip3Label;
      document.getElementById("flowChip3Text").textContent = t.chip3Text;

      document.getElementById("serviceCardTitle").textContent =
        t.serviceCardTitle;
      document.getElementById("serviceCardMini").textContent =
        t.serviceCardMini;

      document.getElementById("previewTitle").firstChild.textContent =
        t.previewTitle + " ";
      document.getElementById("previewTitlePill").textContent = t.previewTitlePill;
      document.getElementById("previewSubtitle").textContent = t.previewSubtitle;
      document.getElementById("previewHint1").textContent = t.previewHint1;
      document.getElementById("previewHint2").textContent = t.previewHint2;
      document.getElementById("previewHint3").textContent = t.previewHint3;

      document.getElementById("lblTaskType").textContent = t.lblTaskType;
      document.getElementById("lblTaskTypeBadge").textContent =
        t.lblTaskTypeBadge;
      document.getElementById("lblLanguage").textContent = t.lblLanguage;
      document.getElementById("lblTone").textContent = t.lblTone;
      document.getElementById("lblRecipient").textContent = t.lblRecipient;
      document.getElementById("lblDetails").textContent = t.lblDetails;
      document.getElementById("btnPasteExampleText").textContent =
        t.btnExample;
      document.getElementById("previewGenerateBtnText").textContent =
        t.btnPreview;
      document.getElementById("previewStatusText").textContent = t.statusDefault;
      document.getElementById("previewPlaceholder").textContent =
        t.previewPlaceholder;

      langButtons.forEach((b) => {
        b.classList.toggle("active", b.dataset.lang === lang);
      });

      if (lang === "zh") {
        languageSelect.value = "中文";
      } else {
        languageSelect.value = "English";
      }

      localStorage.setItem("aurum_lang", lang);
    }

    langButtons.forEach((btn) => {
      btn.addEventListener("click", () => {
        const lang = btn.dataset.lang || "en";
        applyLang(lang);
      });
    });

    // 初始语言
    (function initLang() {
      const saved = localStorage.getItem("aurum_lang");
      if (saved === "zh" || saved === "en") {
        applyLang(saved);
      } else {
        applyLang("en");
      }
    })();
  </script>
</body>
</html>
